<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>C&plus;&plus; STL</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
#button { display: inline-block; background-color: #FF9800; width: 50px; height: 50px; text-align: center; border-radius: 4px; position: fixed; bottom: 30px; right: 30px; transition: background-color .3s, opacity .5s, visibility .5s; opacity: 0; /*visibility: hidden;*/ z-index: 1000; } #button::after { content: "\f077"; font-family: FontAwesome; font-weight: normal; font-style: normal; font-size: 2em; line-height: 50px; color: #fff; } #button:hover { cursor: pointer; background-color: #333; } #button:active { background-color: #555; } #button.show { opacity: 1; visibility: visible; } #btn-back-to-top { position: fixed; bottom: 20px; right: 20px; display: none; } .to-top { background: white; position: fixed; bottom: 16px; right:32px; width:50px; height:50px; border-radius: 50%; border-color: white; display: flex; align-items: center; justify-content: center; font-size:32px; color:#1f1f1f; text-decoration: none; opacity: 0.5; pointer-events: auto; transition: all .4s; transform: rotate(270deg); } 
</style>
    </head>
    <body class="vscode-body vscode-light">
        <!-- title: C++ STL -->
<h1>C++ STL and Containers</h1>
<p><a href="#" class="to-top">➤</i></a></p>
<ul>
<li><a href="#stdstring">std::string</a>
<ul>
<li><a href="#small-string-optimization">Small string optimization</a></li>
</ul>
</li>
<li><a href="#vector">vector</a>
<ul>
<li><a href="#vector-growth-factor">vector growth factor</a>
<ul>
<li><a href="#mathmatical-proof-for-growth-by-factor-not-constant">Mathmatical proof for growth by factor not constant</a></li>
</ul>
</li>
<li><a href="#small-vector-optimization">Small vector optimization</a></li>
</ul>
</li>
<li><a href="#stdmap">std::map</a>
<ul>
<li><a href="#stdmap-custom-comparator">std::map custom comparator</a></li>
</ul>
</li>
<li><a href="#hash_map">hash_map</a>
<ul>
<li><a href="#stdunordered_map-custom-hash-function">std::unordered_map custom hash function</a></li>
<li><a href="#stdunordered_map-with-floating-point-key">std::unordered_map with floating point key</a></li>
<li><a href="#separate-chaining-vs-open-address">Separate chaining vs. Open address</a>
<ul>
<li><a href="#open-address-probing-techniques">Open address probing techniques</a></li>
</ul>
</li>
<li><a href="#hashtable-design-consideration">Hashtable design consideration</a></li>
</ul>
</li>
<li><a href="#iterator-invalidation-rule">Iterator invalidation rule</a>
<ul>
<li><a href="#sequence-containers">Sequence Containers</a></li>
<li><a href="#associative-containers-multisetmap">Associative Containers [multi]{set,map}</a></li>
<li><a href="#unordered-associative-containers-unordered_multisetmap">Unordered Associative Containers unordered_[multi]{set,map}</a></li>
</ul>
</li>
</ul>
<h1 id="stdstring">std::string</h1>
<p>A good article of advanced topics of std::string
<a href="https://shaharmike.com/cpp/std-string/">https://shaharmike.com/cpp/std-string/</a></p>
<h2 id="small-string-optimization">Small string optimization</h2>
<p>In general, string needs to keep: ptr to allocated memory, size, capacity</p>
<p>In gcc, <code>sizeof(string) == 32</code> (ptr, size, union {sso and capacity })</p>
<pre><code class="language-C++"><div><span class="hljs-class"><span class="hljs-keyword">union</span> {</span>
	<span class="hljs-keyword">char</span>[<span class="hljs-number">16</span>] <span class="hljs-comment">// SSO, 16 bytes</span>
	<span class="hljs-keyword">size_t</span> capacity <span class="hljs-comment">// 8 bytes</span>
}
</div></code></pre>
<br>
<br>
<h1 id="vector">vector</h1>
<h2 id="vector-growth-factor">vector growth factor</h2>
<p>Different implementations use different constants K that provide different benefits, in particular most implementations go for either K = 2 or K = 1.5. A higher K will make it faster as it will require less grows, but it will at the same time have a greater memory impact. As an example, in gcc K = 2, while in VS K = 1.5.</p>
<p>Some say 1.5 is preferred over two, to reuse older memory blocks, to take advantage of caching and avoid constantly making the OS give you more memory pages.</p>
<ul>
<li>The idea is that, with a 2x expansion, there is no point in time that the resulting hole is ever going to be large enough to reuse for the next allocation.</li>
<li>Using a 1.5x allocation, we have this instead:</li>
</ul>
<pre><code><code><div>Start with 16 bytes.
When you need more, allocate 24 bytes, then free up the 16, leaving a 16-byte hole.
When you need more, allocate 36 bytes, then free up the 24, leaving a 40-byte hole.
When you need more, allocate 54 bytes, then free up the 36, leaving a 76-byte hole.
When you need more, allocate 81 bytes, then free up the 54, leaving a 130-byte hole.
When you need more, use 122 bytes (rounding up) from the 130-byte hole.
</div></code></code></pre>
<h3 id="mathmatical-proof-for-growth-by-factor-not-constant">Mathmatical proof for growth by factor not constant</h3>
<p>n - the size of vector. <br>
y - the number of copies happened so far, the copy happens every time you grow the vector.</p>
<p><strong>Grow by factor of K</strong></p>
<pre><code><code><div>y = K^1 + K^2 + K^3 ... K^log(K, n) 
	K*y = + K^2 + K^3 ... K^log(K, n) + K*K^log(K, n) 

K*y-y = K*K^log(K, n) - K 
y = K(n-1)/(K-1) = (K/(K-1))(n-1) 

T(n) = y/n = (K/(K-1)) * (n-1)/n &lt; K/(K-1) = O(1)
</div></code></code></pre>
<p>K/(K-1) is a constant, and see the most common cases:</p>
<ul>
<li>K=2, T(n) = 2/(2-1) = 2</li>
<li>K=1.5, T(n) = 1.5/(1.5-1) = 3</li>
</ul>
<p><strong>Grow by constant quantity of C</strong></p>
<pre><code><code><div>y = C + 2*C + 3*C + 4*C + ... (n/C) * C 
   = C(1+2+3+...+n/C), say m = n/C 
   = C*(m*(m-1)/2) 
   = n(m-1)/2 

T(n) = y/n = (m-1)/2 = n/2C - 1/2 = O(n)
</div></code></code></pre>
<p>As we could see it is liner</p>
<h2 id="small-vector-optimization">Small vector optimization</h2>
<p>Normal vector has 3 pointers (start, finish, end_of_storage), 24 bytes</p>
<p><strong>SmallVector&lt;Type, N&gt;</strong> - The main advantage of SmallVector is that it allocates space for some number of elements (N) in the object itself. Because of this, if the SmallVector is dynamically smaller than N, no malloc is performed.</p>
<p><strong>SmallVector<T></strong> (that is, omitting the N). This will choose a default number of inlined elements reasonable for allocation on the stack (for example, trying to keep sizeof(SmallVector<T>) around 64 bytes).</p>
<br>
<br>
<h1 id="stdmap">std::map</h1>
<h2 id="stdmap-custom-comparator">std::map custom comparator</h2>
<pre><code class="language-C++"><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">cmpByStringLength</span> {</span>
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-keyword">const</span> std::string&amp; a, <span class="hljs-keyword">const</span> std::string&amp; b)</span> <span class="hljs-keyword">const</span> </span>{
        <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">length</span>() &lt; b.<span class="hljs-built_in">length</span>();
    }
};
std::map&lt;std::string, std::string, cmpByStringLength&gt; myMap;
</div></code></pre>
<p>Since C++11, you can also use a lambda expression instead of defining a comparator struct:</p>
<pre><code class="language-C++"><div><span class="hljs-keyword">auto</span> comp = [](<span class="hljs-keyword">const</span> string&amp; a, <span class="hljs-keyword">const</span> string&amp; b) { <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">length</span>() &lt; b.<span class="hljs-built_in">length</span>(); };
<span class="hljs-function">map&lt;string, string, <span class="hljs-title">decltype</span><span class="hljs-params">(comp)</span>&gt; <span class="hljs-title">my_map</span><span class="hljs-params">(comp)</span></span>;
</div></code></pre>
<br>
<br>
<h1 id="hash_map">hash_map</h1>
<h2 id="stdunordered_map-custom-hash-function">std::unordered_map custom hash function</h2>
<pre><code class="language-C++"><div><span class="hljs-comment">// custom hash can be a standalone function object:</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">MyHash</span>
{</span>
    <span class="hljs-function">std::<span class="hljs-keyword">size_t</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(S <span class="hljs-keyword">const</span>&amp; s)</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
    </span>{
        std::<span class="hljs-keyword">size_t</span> h1 = std::hash&lt;std::string&gt;{}(s.first_name);
        std::<span class="hljs-keyword">size_t</span> h2 = std::hash&lt;std::string&gt;{}(s.last_name);
        <span class="hljs-keyword">return</span> h1 ^ (h2 &lt;&lt; <span class="hljs-number">1</span>); <span class="hljs-comment">// or use boost::hash_combine (see Discussion)</span>
    }
};
 
<span class="hljs-comment">// custom specialization of std::hash can be injected in namespace std</span>
<span class="hljs-keyword">namespace</span> std
{
    <span class="hljs-keyword">template</span>&lt;&gt; <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">hash</span>&lt;</span>S&gt;
    {
        <span class="hljs-function">std::<span class="hljs-keyword">size_t</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(S <span class="hljs-keyword">const</span>&amp; s)</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">noexcept</span>
        </span>{
            std::<span class="hljs-keyword">size_t</span> h1 = std::hash&lt;std::string&gt;{}(s.first_name);
            std::<span class="hljs-keyword">size_t</span> h2 = std::hash&lt;std::string&gt;{}(s.last_name);
            <span class="hljs-keyword">return</span> h1 ^ (h2 &lt;&lt; <span class="hljs-number">1</span>); <span class="hljs-comment">// or use boost::hash_combine</span>
        }
    };
}
</div></code></pre>
<h2 id="stdunordered_map-with-floating-point-key">std::unordered_map with floating point key</h2>
<p>Use fixed point scaling</p>
<pre><code class="language-C++"><div><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">int</span> P=<span class="hljs-number">4</span>&gt;
class fixed_point_value
{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">double</span> <span class="hljs-built_in">calc_scaling_factor</span>(<span class="hljs-keyword">int</span> digits_of_precision)
    {
        <span class="hljs-built_in"><span class="hljs-keyword">return</span></span> (digits_of_precision == <span class="hljs-number">1</span>) ? <span class="hljs-number">10.0</span> : <span class="hljs-number">10.0</span> * <span class="hljs-built_in">calc_scaling_factor</span>(digits_of_precision - <span class="hljs-number">1</span>);
    }
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">double</span> scaling_factor = <span class="hljs-built_in">calc_scaling_factor</span>(P);

    <span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">int</span> P&gt;
    <span class="hljs-keyword">friend</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">fixed_point_hash</span>;</span>

<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">fixed_point_value</span>(<span class="hljs-keyword">float</span> val) : 
        <span class="hljs-built_in">impl_</span>(<span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>&gt;(std::<span class="hljs-built_in">llround</span>(scaling_factor * val)))
    {}

    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>==(fixed_point_value&lt;P&gt; fpv) <span class="hljs-keyword">const</span> 
    {
        <span class="hljs-keyword">return</span> impl_ == fpv.impl_;
    }

    <span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">to_float</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">float</span>&gt;(impl_ / scaling_factor);
    }

<span class="hljs-keyword">private</span>:
    <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> impl_;
};

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">int</span> P = <span class="hljs-number">4</span>&gt;
struct fixed_point_hash
{
    std::<span class="hljs-keyword">size_t</span> <span class="hljs-built_in"><span class="hljs-keyword">operator</span></span>()(fixed_point_value&lt;P&gt; key) <span class="hljs-keyword">const</span> { 
        <span class="hljs-keyword">return</span> std::hash&lt;<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>&gt;{}(key.impl_);
    }
};

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> V, <span class="hljs-keyword">int</span> P = <span class="hljs-number">4</span>&gt;
<span class="hljs-keyword">using</span> fixed_point_table = std::unordered_map&lt;fixed_point_value&lt;P&gt;, V, fixed_point_hash&lt;P&gt;&gt;;
</div></code></pre>
<h2 id="separate-chaining-vs-open-address">Separate chaining vs. Open address</h2>
<p>(<em>open</em> means value doesn’t always stored at hash location. Separate chaining also known as <em>closed address</em>)</p>
<p>The main difference is the speed of retrieving the value being hashed under different conditions.</p>
<p><strong>Open address Pros:</strong></p>
<ul>
<li>No allocation of new node when keys are inserted</li>
<li>Less memory overhead, no next pointers needed.</li>
<li>more cache friendly, items are stored in the array directly. If an item is not found in the ideal cell, it is often near-by.</li>
<li>In collision chaining, you need to get the first element from the list, therefore, you access the pointer to the head of the list and then the value: 2 operations. (pointer chase). With open-addressing, when there is no collision, you immediately obtain the value you are seeking. That is, you require only 1 operation, which is faster.</li>
</ul>
<p><strong>Separate chaining pros:</strong></p>
<ul>
<li>In open address, when the HashTable starts to get full, and you have a high load factor, due to collisions happening more often, probing will require you to check more Hashtable locations before you find the actual value that you want.</li>
<li>Reference stability: std::unordered_map maintains that. Pointer/reference to the value remains valid until the item is deleted.
<ul>
<li>Open address usually store key and value inline, so it invalidates any references and pointers to elements within the table after rehash</li>
</ul>
</li>
</ul>
<p><strong><code>std::unordered_map</code>(or compliant implementations like Boost.Unordered) vs. open addressing implementation</strong></p>
<p><code>std::unordered_map</code></p>
<ul>
<li>Code uses some specific parts of its API (like the bucket interface or setting the maximum load factor)</li>
<li>Pointer stability, non-moveability etc. required (though some OA alternatives support that)</li>
<li>O(1) iteration required</li>
<li>Hash functions used are only mid-quality (open addressing requires that the hash function have better quality in terms of avalanching etc.)</li>
</ul>
<p>Open-addressing alternatives</p>
<ul>
<li>Speed is the main concern</li>
<li>Existing code can be adapted to a basically more stringent API and more demanding requirements on the element type (moveability)</li>
<li>Hash functions are of good quality (or the default ones from the container provider are used)</li>
</ul>
<h3 id="open-address-probing-techniques">Open address probing techniques</h3>
<p>The below three common techniques have worst-case  O(n) Insert, lookup and remove.</p>
<p><strong>Linear probing</strong>: prob sequence: i+1, i+2, i+3… causing (primary) cluster when long chains getting longer and occupy more keys</p>
<p><strong>Quadratic probing</strong>: prob sequence: i+1^2, i+2^2, i+3^2 from original location. For keys hash to the same bucket, the search sequence will be the same. Called “secondary cluster”.</p>
<p><strong>Double hashing</strong>: another hash function, h2 is used to determine the size of the steps in the search sequence. If h2(key) = j the search sequence starting in bucket i proceeds as follows: i + 1j, i + 2j, i + 3j. This avoids both the primary cluster and secondary cluster.</p>
<p>Some of the more sophisticated techniques can achieve constant time worst-case complexity for lookups.</p>
<p><strong>Cuckoo hashing</strong>: <a href="https://programming.guide/cuckoo-hashing.html">https://programming.guide/cuckoo-hashing.html</a> The main idea is to maintain two sub-array with its own hash, when collision happens, old key is kicked to another sub-array.</p>
<p><strong>Robin-hood</strong>: <a href="https://programming.guide/robin-hood-hashing.html">https://programming.guide/robin-hood-hashing.html</a> The main idea is to balance probe sequence length (stored together with the key) for each key</p>
<p>Google hashmaps:</p>
<ul>
<li>Google dense_hash_map: quadratic probing open addressing</li>
<li>Google flat_hash_map:
<ul>
<li>separate metadata, for each key: 1bit empty, 7 bit hash (only 1 byte overhead per entry)</li>
<li>16 items per group, so meta block is 16 bytes, so that they can use SSE instructions on metadata (SIMD instruction operation on 16 bytes)</li>
<li>in the real data table, everything can be densely packed (just key/value)</li>
<li>Good for unsuccessful lookup - only need look at metadata (stays in cache)</li>
</ul>
</li>
</ul>
<h2 id="hashtable-design-consideration">Hashtable design consideration</h2>
<p><a href="https://www.youtube.com/watch?v=ncHmEUmJZf4&amp;ab_channel=CppCon">https://www.youtube.com/watch?v=ncHmEUmJZf4&amp;ab_channel=CppCon</a> <br>
<a href="https://www.youtube.com/watch?v=M2fKMP47slQ&amp;ab_channel=CppNow">https://www.youtube.com/watch?v=M2fKMP47slQ&amp;ab_channel=CppNow</a></p>
<ul>
<li>Collision chaining is singly-linked-list (not doubly-LL).
<ul>
<li>The cost is extra pointer size each element</li>
<li>If doubly-LL, it will be extra pointer size</li>
</ul>
</li>
<li>New conflict item is inserted at the beginning of linked list
<ul>
<li>The cost is extra dummy node at the start of each listed list</li>
<li>The benefit is we don't need walk to the end of LL to insert a new item</li>
</ul>
</li>
<li>Each LL node contains (Hash + value (what we want to store) +pointer)
<ul>
<li>The cost of storing Hash (int64_t size)</li>
<li>The benefit is we dont need to recalculate hash on Eq check and rehash
<ul>
<li>depends on how costly type’s hash function is</li>
</ul>
</li>
</ul>
</li>
<li>The hash-bucket head points to the last node of previous hash-bucket (8:55)
<ul>
<li>So that it is easy to iterate the hash-table.</li>
<li>And iteration order is fixed for a certain insertion order</li>
<li>If we dont have this linkage, iteration will be iterating of capacity (bucket list) + all linked_list (all nodes), it might not be good in case of big map reuse case.</li>
<li>this caused extra indirection when accessing the node.</li>
<li>A good illustration of how libc++/libstdc++ implement this: <a href="https://www.boost.org/doc/libs/develop/libs/unordered/doc/html/unordered.html#buckets_fast_closed_addressing_implementation">https://www.boost.org/doc/libs/develop/libs/unordered/doc/html/unordered.html#buckets_fast_closed_addressing_implementation</a></li>
</ul>
</li>
<li>Integer module
<ul>
<li>Ensure bucket size is power-of-2: hash &amp; bucket_size_minus_one</li>
<li>Need to be careful to get a good hash-function, it chops away high bits
<ul>
<li>For integer, you have to hash together all bits of a integer so that higher bits also counts</li>
</ul>
</li>
</ul>
</li>
<li>Cache misses (because we chase pointers in separate chaining)
<ul>
<li>Open address (google dense_hash_map for example)
<ul>
<li>how to flag as “empty” slot (which we stop probing), it can be supplied by the user.</li>
<li>Tombstone when we erase</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>
<h1 id="iterator-invalidation-rule">Iterator invalidation rule</h1>
<h3 id="sequence-containers">Sequence Containers</h3>
<ul>
<li>vector: <br>
Reallocation invalidates all the references, pointers, and iterators referring to the elements in the sequence. (reserve , insert, emplace_back, emplace, push_back cause reallocation if the new size is greater than the old capacity.)</li>
<li>deque:
<ul>
<li>An insertion in the middle of the deque invalidates all the iterators and references to elements of the deque.</li>
<li>An insertion at either end of the deque invalidates all the iterators to the deque, but has no effect on the validity of references to elements of the deque.</li>
</ul>
</li>
<li>list: <br>  Does not affect the validity of iterators and references. If an exception is thrown there are no effects. [26.3.10.4/1].</li>
<li>array: <br>  As a rule, iterators to an array are never invalidated throughout the lifetime of the array. One should take note, however, that during swap, the iterator will continue to point to the same array element, and will thus change its value.</li>
</ul>
<h3 id="associative-containers-multisetmap">Associative Containers [multi]{set,map}</h3>
<ul>
<li>The insert and emplace members shall not affect the validity of iterators and references to the container [26.2.6/9]</li>
<li>The erase shall invalidate only iterators and references to the erased elements</li>
</ul>
<h3 id="unordered-associative-containers-unordered_multisetmap">Unordered Associative Containers unordered_[multi]{set,map}</h3>
<ul>
<li>all iterators invalidated when rehashing (can be caused by insert, emplace) occurs, but references unaffected [23.2.5/8].</li>
<li>Rehashing does not occur if the insertion does not cause the container's size to exceed z * B where z is the maximum load factor and B the current number of buckets. [23.2.5/14]</li>
<li>The erase shall invalidate only iterators and references to the erased elements</li>
</ul>
<br>
<br>

        
        
    </body>
    </html>