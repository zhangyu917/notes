<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Assembly</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
#button { display: inline-block; background-color: #FF9800; width: 50px; height: 50px; text-align: center; border-radius: 4px; position: fixed; bottom: 30px; right: 30px; transition: background-color .3s, opacity .5s, visibility .5s; opacity: 0; /*visibility: hidden;*/ z-index: 1000; } #button::after { content: "\f077"; font-family: FontAwesome; font-weight: normal; font-style: normal; font-size: 2em; line-height: 50px; color: #fff; } #button:hover { cursor: pointer; background-color: #333; } #button:active { background-color: #555; } #button.show { opacity: 1; visibility: visible; } #btn-back-to-top { position: fixed; bottom: 20px; right: 20px; display: none; } .to-top { background: white; position: fixed; bottom: 16px; right:32px; width:50px; height:50px; border-radius: 50%; border-color: white; display: flex; align-items: center; justify-content: center; font-size:32px; color:#1f1f1f; text-decoration: none; opacity: 0.5; pointer-events: auto; transition: all .4s; transform: rotate(270deg); } 
</style>
    </head>
    <body class="vscode-body vscode-light">
        <!-- title: Assembly -->
<h1>X86 Assembly</h1>
<p><a href="#" class="to-top">➤</i></a></p>
<ul>
<li><a href="#general">General</a>
<ul>
<li><a href="#att-vs-intel-syntax">AT&amp;T vs Intel syntax</a></li>
<li><a href="#nsam-vs-masm-vs-gas">NSAM vs. MASM vs GAS</a>
<ul>
<li><a href="#masm-the-microsoft-assembler">Masm, the Microsoft assembler</a></li>
<li><a href="#nasm">nasm</a></li>
<li><a href="#gas">GAS</a></li>
</ul>
</li>
<li><a href="#inline-assembly">Inline Assembly</a></li>
</ul>
</li>
<li><a href="#registers">Registers</a></li>
<li><a href="#instructions">instructions</a>
<ul>
<li><a href="#mov">mov</a>
<ul>
<li><a href="#copy-smaller-value-to-larger-destination">Copy smaller value to larger destination</a></li>
<li><a href="#move-with-direct--offset-operands">Move with direct -offset operands</a></li>
<li><a href="#move-with-memory-addressing-mode">Move with memory addressing mode</a></li>
<li><a href="#64bit-mov-rules">64bit mov rules</a></li>
</ul>
</li>
<li><a href="#sse-move">SSE move</a>
<ul>
<li><a href="#scalar-move">Scalar move</a></li>
<li><a href="#packed-move">Packed move</a></li>
</ul>
</li>
<li><a href="#lea">LEA</a>
<ul>
<li><a href="#address-arithmetic-vs-lea-load-effective-address">Address arithmetic vs LEA (Load Effective Address)</a></li>
</ul>
</li>
<li><a href="#branch">Branch</a>
<ul>
<li><a href="#jmp-unconditional-jump">JMP unconditional jump</a></li>
<li><a href="#conditional-jumps">Conditional jumps</a></li>
</ul>
</li>
<li><a href="#loop-instruction">LOOP instruction</a></li>
<li><a href="#rep-instruction">REP instruction</a></li>
<li><a href="#flag-register">FLAG register</a></li>
</ul>
</li>
<li><a href="#x87-floating-point-instruction">X87 floating point instruction</a></li>
</ul>
<h2 id="good-reference">Good Reference</h2>
<p>A very good summary of Assembly</p>
<p><a href="https://cs61.seas.harvard.edu/site/2020/Asm/">https://cs61.seas.harvard.edu/site/2020/Asm/</a></p>
<p><a href="https://en.wikibooks.org/wiki/X86_Assembly/X86_Architecture">https://en.wikibooks.org/wiki/X86_Assembly/X86_Architecture</a></p>
<h1 id="general">General</h1>
<h2 id="att-vs-intel-syntax">AT&amp;T vs Intel syntax</h2>
<ul>
<li>Linux kernel uses AT&amp;T syntax x86 assembly. In the Linux world, it's the common syntax.</li>
<li>In the MS world, Intel syntax is more common.</li>
<li>In GNU assembler (GAS), the primary syntax is AT&amp;T. Intel syntax is a relatively new addition to it.</li>
</ul>
<p>It's just a syntactic difference. The result of both will be the same x86 machine code.</p>
<ul>
<li>
<p>AT&amp;T immediate operands use a $ to denote them, whereas Intel immediate operands are undelimited. Thus, when referencing the decimal value 4 <br>
AT&amp;T: <code>$4</code> <br>
Intel: <code>4</code></p>
</li>
<li>
<p>AT&amp;T prefaces register names with a %, while Intel does not. <br>
Thus, referencing the EAX register <br>
AT&amp;T: <code>%eax</code> <br>
Intel: <code>eax</code></p>
</li>
<li>
<p>AT&amp;T syntax uses the opposite order for source and destination operands. <br>
To move the decimal value 4 to the EAX register, <br>
AT&amp;T: <code>movl $4, %eax </code><br>
Intel: <code>mov eax, 4</code></p>
</li>
<li>
<p>AT&amp;T syntax uses a separate character at the end of mnemonics to reference the data size used in the operation, whereas in Intel syntax the size is declared as a separate operand.<br>
AT&amp;T:  <code>movl $test, %eax</code>  <br>
Intel: <code>mov eax, dword ptr test</code></p>
</li>
<li>
<p>Long calls and jumps use a different syntax to define the segment and offset values. <br>
AT&amp;T: <code>ljmp section, offset</code> <br>
Intel: <code>jmp section:offset</code></p>
</li>
</ul>
<h2 id="nsam-vs-masm-vs-gas">NSAM vs. MASM vs GAS</h2>
<h3 id="masm-the-microsoft-assembler">Masm, the Microsoft assembler</h3>
<p>It is the most commonly taught x86 assembler. Unfortunately, its use is limited to Windows. The Microsoft assembler is included with Microsoft C++ compilers.</p>
<p>MASM syntax is somewhat messy and inconsistent due to a heritage that dates back to the very first assemblers for the 8086 processor. Microsoft is still maintaining MASM in order to provide a complete set of development tools for Windows</p>
<h3 id="nasm">nasm</h3>
<p>nasm is a free cross-platform x86 assembler which supports all the common x86 operating systems – Linux, MacOS X and Windows.</p>
<p>The syntax is more clear and consistent than MASM syntax. NASM is updated regularly with new instruction sets. NASM is currently the best multi-platform assembler and is widely used by assembly programmers.</p>
<p>Unlike the GNU assembler, it uses the same Intel syntax that masm does. Still, there are some differences.
<a href="https://left404.com/2011/01/04/converting-x86-assembly-from-masm-to-nasm-3/">https://left404.com/2011/01/04/converting-x86-assembly-from-masm-to-nasm-3/</a></p>
<h3 id="gas">GAS</h3>
<p>GAS, the Gnu assembler is part of the Gnu Binutils package that is included with most distributions of Linux, BSD and Mac OS X.</p>
<p>The Gnu and Clang compilers produce assembly output that goes through the Gnu assembler before it is linked.</p>
<ul>
<li>The Gnu assembler traditionally uses the AT&amp;T syntax that works well for machine-generated code, but it is very inconvenient for human-generated assembly code.</li>
<li>Fortunately, the Gnu assembler has an option for using Intel syntax instead. The Gnu-Intel syntax is similar to MASM syntax.</li>
</ul>
<h2 id="inline-assembly">Inline Assembly</h2>
<p>The asm keyword allows you to embed assembler instructions within C code.</p>
<p>Different compilers have different syntaxes for inline assembly. It mainly has MASM style and Gnu-style.</p>
<ul>
<li>MASM-style inline assembly is supported by 16-bit and 32-bit Microsoft C++ compilers, but the 64-bit Microsoft compiler has no inline assembly.</li>
<li>The Intel C++ compiler supports MASM-style inline assembly in both 32-bit and 64-bit Windows as well as 32-bit and 64-bit Linux.
<ul>
<li>Under Linux requires the command line option -use-msasm to recognize this syntax for inline assembly. Only the keyword __asm works in this case</li>
</ul>
</li>
<li>Gnu-style inline assembly is supported by the Gnu compiler, the Clang compiler, and the Intel compiler for Linux in both 32-bit and 64-bit mode.</li>
</ul>
<p>In Gnu-style inline assembly, assembly code is entered as a string constant which is passed through to the assembler with very little change. The default syntax is the AT&amp;T syntax that the Gnu assembler uses.</p>
<p>In gcc, with extended asm you can read and write C variables from assembler and perform jumps from assembler code to C labels. Extended asm syntax uses colons (‘:’) to delimit the operand parameters after the assembler template:</p>
<pre><code class="language-C"><div><span class="hljs-keyword">asm</span> <span class="hljs-keyword">asm</span>-qualifiers ( AssemblerTemplate 
                   : OutputOperands 
                 [ : InputOperands
                 [ : Clobbers ] ])
</div></code></pre>
<p>The asm keyword is a GNU extension. When writing code that can be compiled with -ansi and the various -std options, use <code>__asm__</code> instead of asm.</p>
<br>
<h1 id="registers">Registers</h1>
<p><img src="images/2022-01-25-14-13-43.png" alt=""></p>
<h1 id="instructions">instructions</h1>
<h2 id="mov">mov</h2>
<p>MOV: copy data from source to destination</p>
<h3 id="copy-smaller-value-to-larger-destination">Copy smaller value to larger destination</h3>
<p>Approach 1:</p>
<pre><code class="language-asm"><code><div>.data 
count WORD 1

.code
mov eax, 0
mov ax, count
</div></code></code></pre>
<p>Approach 2:</p>
<p>movzx (move with zero-extended)</p>
<pre><code class="language-asm"><code><div>.data
byteVal BYTE 100001111b

.code
movzx ax, byteVal ; ax = 0000000010001111b
</div></code></code></pre>
<p>movsx (move with sign-extend)</p>
<pre><code class="language-asm"><code><div>.data
byteVal BYTE 100001111b

.code
movzx ax, byteVal ; ax = 1111111110001111b
</div></code></code></pre>
<h3 id="move-with-direct--offset-operands">Move with direct -offset operands</h3>
<pre><code class="language-asm"><code><div>numArray BYTE 10h, 20h, 30h, 40h

mov al, numArray ; AL = 10h
mov al, [numArray +1] ; AL = 20h
mov al, [numArray +2] ; AL = 30h
</div></code></code></pre>
<h3 id="move-with-memory-addressing-mode">Move with memory addressing mode</h3>
<p>Effective address = baseReg + IndexReg * ScaleFactor + Disp (result is always 32bit)</p>
<p>Examples:</p>
<pre><code class="language-asm"><code><div>Disp					mov eax,[MyVal]
BaseReg				    mov eax,[ebx]
BaseReg+Disp			mov eax,[ebx+12]
BaseReg+IndexReg*SF+Disp	mov eax,[ebx+esi*4+20]
etc					...
</div></code></code></pre>
<h3 id="64bit-mov-rules">64bit mov rules</h3>
<ul>
<li>
<p>modifying a 32-bit partial register will set the rest of the register (bit 32-63) to zero</p>
</li>
<li>
<p>modifying an 8-bit or 16-bit partial register does not affect the rest of the register.</p>
<p>Example 3.1. 8, 16, 32 and 64 bit registers</p>
<pre><code class="language-asm"><code><div>mov rax, 1111111111111111H ; rax = 1111111111111111H
mov eax, 22222222H ; rax = 0000000022222222H
mov ax, 3333H ; rax = 0000000022223333H
mov al, 44H ; rax = 0000000022223344H
</div></code></code></pre>
</li>
<li>
<p>There is a good reason for this inconsistency. Setting the unused part of a register to zero is more efficient than leaving it unchanged because this removes a false dependence on previous values. But the principle of resetting the unused part of a register cannot be extended to 16 bit and 8 bit partial registers because this would break the backwards compatibility with 32-bit and 16-bit modes.</p>
</li>
<li>
<p>The only instruction that can have a 64-bit immediate data operand is MOV. Other integer instructions can only have a 32-bit sign-extended operand.</p>
<ul>
<li>If you need to add an immediate value to a 64 bit register then it is necessary to first move the value into another register if the value is too big for fitting into a 32 bit sign-extended operand.</li>
</ul>
</li>
</ul>
<h2 id="sse-move">SSE move</h2>
<h3 id="scalar-move">Scalar move</h3>
<p>movss which moves 32 bit floating point values
movsd which moves 64 bit floating point values (doubles)</p>
<h3 id="packed-move">Packed move</h3>
<ul>
<li>Aligned move:
<ul>
<li>movaps: moving four floats</li>
<li>movapd: moving two doubles</li>
</ul>
</li>
<li>unaligned move: movups and movupd.</li>
</ul>
<p>Aligned data means that it is on a 16 byte boundary in memory.</p>
<p>Aligned loads are up to 4x faster</p>
<ul>
<li>on the Core i series of CPUs the unaligned moves are just as fast as the aligned moves when the data is aligned.</li>
</ul>
<p>Your program will fail with a segmentation fault if you attempt to use an aligned move to an unaligned address.</p>
<h2 id="lea">LEA</h2>
<h3 id="address-arithmetic-vs-lea-load-effective-address">Address arithmetic vs LEA (Load Effective Address)</h3>
<p>The full form of a memory operand is offset(base,index,scale), which refers to the address <code>offset + base + index*scale</code>.</p>
<ul>
<li>In <code>movl 0x18(%rax,%rbx,4), %ecx</code>, the address <code>%rax + 0x18 + %rbx*4</code> is computed, then immediately dereferenced: the 4-byte value located there is loaded into %ecx.</li>
<li>In <code>leaq 0x18(%rax,%rbx,4), %rcx</code>, the same address is computed, but it is <strong>not dereferenced</strong>. Instead, the <strong>computed address is moved</strong> into register %rcx.</li>
</ul>
<h2 id="branch">Branch</h2>
<h3 id="jmp-unconditional-jump">JMP unconditional jump</h3>
<pre><code class="language-asm"><code><div>jmp label
</div></code></code></pre>
<p>where label is a label in the program 's text segment . The assembler will generate a rip relative jump instruction.</p>
<ul>
<li>The simplest relative jump uses an 8 bit signed immediate value and is encoded in 2 bytes. This allows jumping forwards or backwards about 1 27 bytes.</li>
<li>The next variety of relative jump uses a 32 bit signed immediate value and requires a total of 5 bytes.</li>
<li>The assembler figures out which variety it can use and chooses the shorter form.</li>
</ul>
<h3 id="conditional-jumps">Conditional jumps</h3>
<p>when status flag is true</p>
<pre><code class="language-asm"><code><div>cmp eax, 0
jz someLabel    ; jump if zero, which means zero flag (ie., ZF=1) is on
jnz someLablel  ; jump if not zero, which means zero flag is not on
je someLabel    ; jump if equal, which means equal flag is on
</div></code></code></pre>
<h2 id="loop-instruction">LOOP instruction</h2>
<p>loop is exactly like dec ecx / jnz, except it doesn't set flags.</p>
<p>But it is (about 5 times) slower than dec ecx/jnz, avoid using it.
<a href="https://stackoverflow.com/questions/35742570/why-is-the-loop-instruction-slow-couldnt-intel-have-implemented-it-efficiently">https://stackoverflow.com/questions/35742570/why-is-the-loop-instruction-slow-couldnt-intel-have-implemented-it-efficiently</a></p>
<p>Avoid JECXZ and LOOP because they are not so efficient on the more modern architectures. (<a href="http://agner.org/optimize/optimizing_assembly.pdf">agner.org/optimize/optimizing_assembly.pdf</a> page 89)</p>
<h2 id="rep-instruction">REP instruction</h2>
<p>Repeated String operations</p>
<ul>
<li>movsb (move from rsi to rdi)</li>
<li>stosb (move from al to rdi)</li>
<li>lodsb (move from rsi to al)</li>
</ul>
<h2 id="flag-register">FLAG register</h2>
<p>The flags register is affected by most instruction as a byproduct of the operation</p>
<p>There are some instruction whose whole purpose is to change the flags register, include CMP, AND, OR, XOR, NOT, and NEG</p>
<ul>
<li>The CMP instruction sets the flags as if it had performed subtraction on the operand.</li>
</ul>
<br>
<p>0 CF : Carry Flag. Set if the last arithmetic operation carried (addition) or borrowed (subtraction) a bit beyond the size of the register. This is then checked when the operation is followed with an add-with-carry or subtract-with-borrow to deal with values too large for just one register to contain.</p>
<p>2 PF : Parity Flag. Set if the number of set bits in the least significant byte is a multiple of 2.</p>
<p>4 AF : Adjust Flag. Carry of Binary Code Decimal (BCD) numbers arithmetic operations.</p>
<p>6 ZF : Zero Flag. Set if the result of an operation is Zero (0).</p>
<p>7 SF : Sign Flag. Set if the result of an operation is negative.</p>
<p>8 TF : Trap Flag. Set if step by step debugging.</p>
<p>9 IF : Interruption Flag. Set if interrupts are enabled.</p>
<p>10 DF : Direction Flag. Stream direction. If set, string operations will decrement their pointer rather than incrementing it, reading memory backwards.</p>
<p>11 OF : Overflow Flag. Set if signed arithmetic operations result in a value too large for the register to contain.</p>
<p>12-13 IOPL : I/O Privilege Level field (2 bits). I/O Privilege Level of the current process.</p>
<p>14 NT : Nested Task flag. Controls chaining of interrupts. Set if the current process is linked to the next process.</p>
<p>16 RF : Resume Flag. Response to debug exceptions.</p>
<p>17 VM : Virtual-8086 Mode. Set if in 8086 compatibility mode.</p>
<p>18 AC : Alignment Check. Set if alignment checking of memory references is done.</p>
<p>19 VIF : Virtual Interrupt Flag. Virtual image of IF.</p>
<p>20 VIP : Virtual Interrupt Pending flag. Set if an interrupt is pending.</p>
<p>21 ID : Identification Flag. Support for CPUID instruction if can be set.</p>
<h1 id="x87-floating-point-instruction">X87 floating point instruction</h1>
<p>Classically, x86 processors have done FPU operations on a separate floating-point coprocessor (known as a floating-point unit, or FPU), the x87.</p>
<ul>
<li>Up until the 80486 processor, this was a separate chip installed on the main board.</li>
<li>Starting with the 80486DX, the x87 FPU was integrated directly onto the same silicon as the main processor and was therefore available on all systems, instead of just those that had a specialized x87 FPU installed.</li>
<li>This remains true today -- all x86 processors have a built-in x87-compatible FPU.</li>
</ul>
<p>x87 FPU instructions are all the ones whose mnemonics begin with f, including FADD, FMUL, FDIV, FLD, FSTP, etc.</p>
<p>However, the x87 FPU is rarely used anymore for floating-point operations. Although it is still there, it has effectively been superseded by a SIMD unit that is both easier to program for and (in general) more efficient.</p>
<ul>
<li>AMD was the first to introduce such a specialized vector unit with their 3DNow! technology in the K6-2 microprocessor (circa 1998)</li>
<li>Intel released the SSE extension with the Pentium III processor. It supported vector operations on single-precision floating-point values. It also used a completely separate set of registers, which made programming much easier.</li>
<li>Intel released SSE2 with Pentium 4, which added support for double-precision floating-point values. SSE2 is supported by all processors that support the 64-bit long mode extensions (AMD64), which is all processors made today.</li>
<li>so <strong>64-bit code virtually always uses SSE2</strong> instructions to manipulate floating-point values, rather than x87 instructions. Even in 32-bit code, SSE2 instructions are in common use today, since all processors since the Pentium 4 have supported them.</li>
<li>Visual Studio 2010 was the last major version to emit x87 code by default for 32-bit builds. In all later versions, SSE2 instructions are generated unless you specifically turn them off (/arch:IA32).</li>
</ul>
<p>Two areas that X87 might still be used:</p>
<ul>
<li>
<p>For hand-written asm, x87 has some instructions that don't exist in the SSE instruction set. It's all trigonometric stuff like fsin, fcos, fatan, fatan2 and some exponential/logarithm stuff.</p>
<p>With <code>gcc -O3 -ffast-math -mfpmath=387</code>, GCC9 will still actually inline sin(x) as an fsin instruction, regardless of what the implementation in libm would have used. (<a href="https://godbolt.org/z/Euc5gp">https://godbolt.org/z/Euc5gp</a>).</p>
<p>If your code spends most of the time doing trigonometry, you may see a performance gain or loss if you use x87, depending on whether your standard math-library implementation using SSE1/SSE2 is faster or slower than the slow microcode for fsin on whatever CPU you're using.</p>
</li>
<li>
<p>x87 FPU supported a special &quot;long double&quot; format, with 80 bits of precision. SSE supports only single-precision (32-bit), while SSE2 added support for double-precision (64-bit) values. If you absolutely need extended precision, then the x87 is your best option. (At the level of individual instructions, it is comparable in speed to the SIMD units operating on scalar values.)</p>
</li>
</ul>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>