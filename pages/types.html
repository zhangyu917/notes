<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>C&plus;&plus; Types and Casts</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
#button { display: inline-block; background-color: #FF9800; width: 50px; height: 50px; text-align: center; border-radius: 4px; position: fixed; bottom: 30px; right: 30px; transition: background-color .3s, opacity .5s, visibility .5s; opacity: 0; /*visibility: hidden;*/ z-index: 1000; } #button::after { content: "\f077"; font-family: FontAwesome; font-weight: normal; font-style: normal; font-size: 2em; line-height: 50px; color: #fff; } #button:hover { cursor: pointer; background-color: #333; } #button:active { background-color: #555; } #button.show { opacity: 1; visibility: visible; } #btn-back-to-top { position: fixed; bottom: 20px; right: 20px; display: none; } .to-top { background: white; position: fixed; bottom: 16px; right:32px; width:50px; height:50px; border-radius: 50%; border-color: white; display: flex; align-items: center; justify-content: center; font-size:32px; color:#1f1f1f; text-decoration: none; opacity: 0.5; pointer-events: auto; transition: all .4s; transform: rotate(270deg); } 
</style>
    </head>
    <body class="vscode-body vscode-light">
        <!-- title: C++ Types and Casts -->
<h1>C++ Types and Casts</h1>
<p><a href="#" class="to-top">➤</i></a></p>
<ul>
<li><a href="#integers">Integers</a>
<ul>
<li><a href="#integer-2s-complement-representation">Integer 2's Complement Representation</a></li>
</ul>
</li>
<li><a href="#floating-numbers">Floating numbers</a>
<ul>
<li><a href="#fp-operation-cost">FP operation Cost</a></li>
<li><a href="#floating-point-representation">Floating-point representation</a></li>
<li><a href="#underflow">Underflow</a></li>
<li><a href="#propagation-of-nan-and-inf">Propagation of NAN and INF</a></li>
<li><a href="#optimization-technique">Optimization technique</a></li>
</ul>
</li>
<li><a href="#booleans">Booleans</a></li>
<li><a href="#bitfields">bitfields</a></li>
<li><a href="#pointers-and-references">Pointers and references</a>
<ul>
<li><a href="#pointer-arithmetic">Pointer arithmetic</a></li>
</ul>
</li>
<li><a href="#type-conversions">Type conversions</a>
<ul>
<li><a href="#signed--unsigned-conversion">Signed / unsigned conversion</a></li>
<li><a href="#integer-size-conversion">Integer size conversion</a></li>
<li><a href="#floating-point-precision-conversion">Floating-point precision conversion</a></li>
<li><a href="#integer-to-float-conversion">Integer to float conversion</a></li>
<li><a href="#float-to-integer-conversion">Float to integer conversion</a></li>
</ul>
</li>
<li><a href="#reinterpret_cast">reinterpret_cast</a>
<ul>
<li><a href="#faster-way-of-fabs">Faster way of fabs()</a></li>
</ul>
</li>
<li><a href="#const_cast--static_cast">const_cast / static_cast</a></li>
<li><a href="#dynamic_cast">dynamic_cast</a></li>
<li><a href="#rtti">RTTI</a></li>
</ul>
<h2 id="integers">Integers</h2>
<p>In most cases, there is no difference in speed between using signed and unsigned integers. But there are a few cases where it matters:</p>
<ul>
<li>Division by a constant: <strong>Unsigned is faster</strong> than signed when you divide an integer with a constant. This also applies to the modulo operator %.</li>
<li>Conversion to floating point: <strong>Signed is faster</strong> than unsigned integers for most instruction sets.</li>
<li>One case here: [links] The art of writing efficient programs</li>
</ul>
<p>Conversion between signed and unsigned integers is costless. It is simply a matter of interpreting the same bits differently.</p>
<pre><code class="language-C++"><div><span class="hljs-keyword">int</span> a, b;
<span class="hljs-keyword">double</span> c;
b = (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)a / <span class="hljs-number">10</span>; 	<span class="hljs-comment">// Convert to unsigned for fast division</span>
c = a * <span class="hljs-number">2.5</span>;			    <span class="hljs-comment">// Use signed when converting to double</span>
</div></code></pre>
<p><strong>Not to mix signed and unsigned integers in comparisons</strong>, such as &lt;. The result of comparing signed with unsigned integers is ambiguous and may produce undesired results.</p>
<p>Multiplication and division take longer time.</p>
<ul>
<li>Integer multiplication takes 3 - 4 clock cycles on most modern microprocessors.</li>
<li>Integer division takes 40 - 80 clock cycles</li>
</ul>
<p>Pre-increment operator ++i and the post-increment operator i++ are same in efficiency by themselves, they are as fast as additions. But they are some exceptions.</p>
<ul>
<li>x = array[i++] is more efficient than x = array[++i], because in the latter case, the calculation of the address of the array element has to wait for the new value of i which will delay the availability of x for approximately two clock cycles.</li>
<li>in the case a = ++b; the compiler will recognize that the values of a and b are the same after this statement so that it can use the same register for both. This is not the case for a = b++;</li>
</ul>
<p>The following guidelines can be used for improving code that contains integer division:</p>
<ul>
<li>Integer division by a constant is faster than division by a variable. Make sure the value of the divisor is known at compile time.</li>
<li>Integer division by a constant is faster if the constant is a power of 2</li>
<li>Integer division by a constant is faster if the dividend is unsigned</li>
</ul>
<pre><code class="language-C++"><div><span class="hljs-comment">// Example 14.10</span>
<span class="hljs-keyword">int</span> a, b, c;
a = b / c; 			    <span class="hljs-comment">// This is slow</span>
a = b / <span class="hljs-number">10</span>; 			<span class="hljs-comment">// Division by a constant is faster</span>
a = (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)b / <span class="hljs-number">10</span>;	 <span class="hljs-comment">// Still faster if unsigned</span>
a = b / <span class="hljs-number">16</span>; 			     <span class="hljs-comment">// Faster if divisor is a power of 2</span>
a = (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span>)b / <span class="hljs-number">16</span>;	 <span class="hljs-comment">// Still faster if unsigned</span>
</div></code></pre>
<h3 id="integer-2s-complement-representation">Integer 2's Complement Representation</h3>
<p>In 2's complement representation:</p>
<ul>
<li>The most significant bit (msb) is the sign bit, with a value of 0 representing positive integers and 1 representing negative integers.</li>
<li>The remaining n-1 bits represent the magnitude of the integer, as follows:
<ul>
<li>for positive integers, the absolute value of the integer is equal to &quot;the magnitude of the (n-1) bit binary pattern&quot;.</li>
<li>for negative integers, the absolute value of the integer is equal to &quot;the magnitude of the complement of the (n-1) bit binary pattern plus one&quot; (hence called <em>2's complement</em>).</li>
</ul>
</li>
</ul>
<p>The following diagram explains how the 2's complement works. By re-arranging the number line, values from -128 to +127 are represented contiguously by ignoring the carry bit.</p>
<p><img src="images/2022-04-26-09-05-04.png" alt=""></p>
<p>Range of n-bit 2's Complement Signed Integers
An n-bit 2's complement signed integer can represent integers from <code>-2^(n-1) to +2^(n-1)-1</code></p>
<table>
<thead>
<tr>
<th>n</th>
<th>minimum</th>
<th>maximum</th>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td>-(2^7)  (=-128)</td>
<td>+(2^7)-1  (=+127)</td>
</tr>
<tr>
<td>16</td>
<td>-(2^15) (=-32,768)</td>
<td>+(2^15)-1 (=+32,767)</td>
</tr>
<tr>
<td>32</td>
<td>-(2^31) (=-2,147,483,648)</td>
<td>+(2^31)-1 (=+2,147,483,647)(9+ digits)</td>
</tr>
<tr>
<td>64</td>
<td>-(2^63) (=-9,223,372,036,854,775,808)</td>
<td>+(2^63)-1 (=+9,223,372,036,854,775,807)(18+ digits)</td>
</tr>
</tbody>
</table>
<br>
<br>
<h2 id="floating-numbers">Floating numbers</h2>
<p>Modern compilers will use vector registers (instead of x87 registers) for floating point calculations whenever they are available, i.e. in 64-bit mode or when the SSE or higher instruction set is enabled.</p>
<p>In most cases, double precision calculations take no more time than single precision.</p>
<ul>
<li>Single precision division, square root, and mathematical functions are calculated faster than double precision when the XMM registers are used,</li>
</ul>
<h3 id="fp-operation-cost">FP operation Cost</h3>
<ul>
<li>Floating point addition takes 3 - 6 clock cycles.</li>
<li>Multiplication takes 4 - 8 clock cycles.</li>
<li>Division takes 14 - 45 clock cycles
<ul>
<li>Floating point division by a constant should be done by multiplying with the reciprocal<pre><code class="language-c++"><div><span class="hljs-keyword">double</span> a, b;
a = b / <span class="hljs-number">1.2345</span>; <span class="hljs-comment">// change to a = b * (1. / 1.2345);</span>
</div></code></pre>
The compiler will calculate (1./1.2345) at compile time and insert the reciprocal in the code, so you will never spend time doing the division.</li>
</ul>
</li>
</ul>
<br>
<p>Do not mix single and double precision in the same expression.</p>
<pre><code class="language-c++"><div><span class="hljs-keyword">float</span> a, b;
a = b * <span class="hljs-number">1.2</span>; <span class="hljs-comment">// 1.2 is double. Mixing double and float is bad. Use 1.2f instead.</span>
</div></code></pre>
<p>The C/C++ standard specifies that all floating point constants are double precision by default, so 1.2 in this example is a double precision constant. The code needs to convert b from single precision to double precision before multiplying with the double precision constant and then convert the result back to single precision. These conversions take time.</p>
<p>Avoid conversions between integers and floating point variables, if possible.</p>
<ul>
<li>refer to <a href="#integer-to-float-conversion">below</a></li>
</ul>
<h3 id="floating-point-representation">Floating-point representation</h3>
<ul>
<li>A floating-point number is typically expressed in the <strong>scientific notation</strong>, with a fraction (F, also called the mantissa or significand), and an exponent (E) of a certain radix (r), in the form of F×r^E. Decimal numbers use radix of 10 (F×10^E); while binary numbers use radix of 2 (F×2^E).both F and E can be positive as well as negative.</li>
<li>The representation of floating-point numbers is not unique. In the normalized scientific form, there is only a single non-zero digit before the radix point. For example, decimal number 123.4567 can be normalized as 1.234567×10^2; binary number 1010.1011B can be normalized as 1.0101011B×2^3.</li>
<li>It is important to note that floating-point numbers suffer from <strong>loss of precision</strong> when represented with a fixed number of bits (e.g., 32-bit or 64-bit). This is because there are infinite number of real numbers (even within a small range of says 0.0 to 0.1). On the other hand, <strong>a n-bit binary pattern can represent a finite 2^n distinct numbers</strong>. Hence, not all the real numbers can be represented. The nearest approximation will be used instead, resulted in loss of accuracy.</li>
<li>Modern computers adopt <strong>IEEE 754 standard</strong> for representing floating-point numbers. There are two representation schemes: 32-bit single-precision and 64-bit double-precision.</li>
</ul>
<p>A good summary of IEEE754: <a href="https://users.cs.duke.edu/~raw/cps104/TWFNotes/floating.html">https://users.cs.duke.edu/~raw/cps104/TWFNotes/floating.html</a></p>
<ul>
<li>The most significant bit is the sign bit (S), with 0 for positive numbers and 1 for negative numbers.</li>
<li>For the exponent (E), a so-called bias (or excess) is applied so as to represent both positive and negative exponent. The bias is set at half of the range. For single precision with an 8-bit exponent, the bias is 127 (or excess-127). For double precision with a 11-bit exponent, the bias is 1023 (or excess-1023).
<ul>
<li>For single-precision, 1 ≤ E ≤ 254 with excess of 127. Hence, the actual exponent is from -126 to +127</li>
<li>For double-precision, 1 ≤ E ≤ 2046 with excess of 1023. The actual exponent is from -1022 to +1023</li>
<li>If E = 0, but the fraction is non-zero, then the value is in <strong>denormalized form</strong>, and a leading bit of 0 is assumed. Denormalized form can represent very small numbers closed to zero.</li>
<li>If E= 0, F = 0, it represents zero.</li>
</ul>
</li>
<li>The fraction (F) (also called the mantissa or significand) is composed of an implicit leading bit (before the radix point) and the fractional bits (after the radix point). The leading bit for normalized numbers is always 1 (so it can be implicit)</li>
</ul>
<p>Example: <br>
43.625 =  1.01011101 * 2^5  , in single-precision floating point:</p>
<ul>
<li>sign bit: 0,</li>
<li>exponent: 5 + 127(bias) = 132 (10000100, 8 bits)</li>
<li>Mantissa: 010111010000...00000 (up to 23 bits), implicit leading 1</li>
</ul>
<p><strong>Special Values</strong></p>
<ul>
<li><strong>Zero</strong>: Zero cannot be represented in the normalized form, and must be represented in denormalized form with E=0 and F=0. There are two representations for zero: +0 with S=0 and -0 with S=1.</li>
<li><strong>Infinity</strong>: The value of +infinity (e.g., 1/0) and -infinity (e.g., -1/0) are represented with an exponent of all 1's (E = 255 for single-precision and E = 2047 for double-precision), F=0, and S=0 (for +INF) and S=1 (for -INF).</li>
<li><strong>Not a Number (NaN)</strong>: NaN denotes a value that cannot be represented as real number (e.g. 0/0). NaN is represented with Exponent of all 1's (E = 255 for single-precision and E = 2047 for double-precision) and any non-zero fraction.</li>
</ul>
<p><strong>Double precision (64 bits) floating point</strong></p>
<p><img src="images/2022-01-31-21-44-29.png" alt=""></p>
<p>SIGN (1)
EXPONENT (11)
MANTISSA (52)</p>
<ul>
<li>Sign: Positive or negative</li>
<li>Exponent: Choose a power of 2 (e.g. 128 or 1/16) from a range <br>
Bias: 1023 <br>
Real exponent + bias = what's stored into exponent field</li>
<li>Mantissa: The power of 2 chosen by the exponent is added. Then, each bit in the mantissa corresponds to the next lower power of 2, which is added if the bit is 1.</li>
<li>Zero has a special encoding.</li>
</ul>
<p><strong>Single precision (32 bits) floating number</strong></p>
<p><img src="images/2022-04-26-09-17-12.png" alt=""></p>
<p>SIGN (1)
EXPONENT (8)
MANTISSA (23)</p>
<ul>
<li>Exponent Bias:127</li>
</ul>
<p><strong>Ranges</strong></p>
<p>There are two ranges</p>
<ul>
<li>one for normalized numbers (E != 0)</li>
<li>one for denormalized numbers (E == 0)</li>
</ul>
<p><img src="images/2022-04-26-09-21-48.png" alt=""></p>
<h3 id="underflow">Underflow</h3>
<p>An example of floating-point underflow:</p>
<pre><code class="language-c++"><div><span class="hljs-keyword">double</span> d = DBL_MIN / <span class="hljs-number">3.0</span>;
</div></code></pre>
<p>A conforming IEEE 754 implementation should set d to a “subnormal”, that is, a number that is so close to zero that precision is reduced. Some implementations may “Flush to Zero”. The consequence in the example above is to set d to zero.</p>
<p>Floating-point underflow is not undefined behavior. You can, if you wish, use “FPU exceptions” to detect it either by polling or by receiving SIGFPE.</p>
<p>Applications that generate floating point underflow can benefit from setting the flush-to-zero mode. It is strongly recommended to set the flush-to-zero mode unless you have special reasons to use subnormal numbers.</p>
<pre><code class="language-c++"><div><span class="hljs-comment">// Example 7.5. Set flush-to-zero mode (SSE):</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;xmmintrin.h&gt;</span></span>
_MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON);
</div></code></pre>
<p>You may, in addition, set the denormals-are-zero mode if vector regsiters are available:</p>
<pre><code class="language-c++"><div><span class="hljs-comment">// Example 7.6. Set flush-to-zero and denormals-are-zero mode (SSE2):</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;xmmintrin.h&gt;</span></span>
_mm_setcsr(_mm_getcsr() | <span class="hljs-number">0x8040</span>);
</div></code></pre>
<h3 id="propagation-of-nan-and-inf">Propagation of NAN and INF</h3>
<p>Almost all floating point errors will propagate to the end result where they appear as INF or NAN. This is a very efficient alternative to exceptions and fault trapping.</p>
<p>Floating-point overflow and division by zero gives INF (infinity).</p>
<ul>
<li>If you add or multiply infinity with something you get infinity as a result</li>
<li>Except, If you divide a normal number by INF you get zero</li>
</ul>
<p>The special code NAN (not a number) occurs:</p>
<ul>
<li>INF-INF and INF/INF give NAN</li>
<li>divide zero by zero</li>
<li>when the input of a function is out of range, such as sqrt(-1) and log(-1)</li>
<li>Most operations with a NAN input will give a NAN output</li>
<li>A NAN can contain a payload with extra information. A function library can put an error code into this payload in case of an error, and this payload will propagate to the end result.</li>
</ul>
<p>The function finite() will return false when the parameter is INF or NAN</p>
<h3 id="optimization-technique">Optimization technique</h3>
<p><a href="optimization_technique.html#using-integer-operations-for-fp">Using integer operations for fp</a></p>
<br>
<h2 id="booleans">Booleans</h2>
<p>The order of boolean operands</p>
<ul>
<li>It may be advantageous to put the operand that is most often true last in an &amp;&amp; expression, or first in an || expression.</li>
<li>If one operand is more predictable than the other, then put the most predictable operand first.</li>
<li>If one operand is faster to calculate than the other then put the operand that is calculated the fastest first.</li>
</ul>
<p>If a variable is known to be 0 or 1 (a boolean), then boolean operators (&amp;&amp;, ||) have same effect of bitwise operators (&amp;, |)</p>
<ul>
<li>You cannot use ~ for NOT, instead, you can Xor with 1 ( a ^ 1)</li>
<li>Boolean operators have “short-cut” property
<ul>
<li>You cannot replace a &amp;&amp; b with a &amp; b if b is an expression that should not be evaluated if a is false.</li>
<li><strong>However</strong>, this also means there are “if” branches involved if there are multiple operands in boolean operator (a &amp;&amp; b &amp;&amp; c &amp;&amp; d), in this case, it is advantageous to replace with (a &amp; b &amp; c &amp; d)</li>
</ul>
</li>
</ul>
<h2 id="bitfields">bitfields</h2>
<p>Bitfields may be useful for making data more compact. Accessing a member of a bitfield is <strong>less efficient</strong> than accessing a member of a structure.</p>
<p>It is faster to compose a bitfield by the use of &lt;&lt; and | operations than to write the members individually</p>
<pre><code class="language-C++"><div><span class="hljs-comment">// unoptimized</span>
<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Bitfield</span> {</span>
<span class="hljs-keyword">int</span> a:<span class="hljs-number">4</span>;
<span class="hljs-keyword">int</span> b:<span class="hljs-number">2</span>;
<span class="hljs-keyword">int</span> c:<span class="hljs-number">2</span>;
};
Bitfield x;
<span class="hljs-keyword">int</span> A, B, C;
x.a = A;
x.b = B;
x.c = C;

<span class="hljs-comment">// optimized</span>
<span class="hljs-class"><span class="hljs-keyword">union</span> <span class="hljs-title">Bitfield</span> {</span>
     <span class="hljs-class"><span class="hljs-keyword">struct</span> {</span>
<span class="hljs-keyword">int</span> a:<span class="hljs-number">4</span>;
<span class="hljs-keyword">int</span> b:<span class="hljs-number">2</span>;
<span class="hljs-keyword">int</span> c:<span class="hljs-number">2</span>;
      };
      <span class="hljs-keyword">char</span> abc;
};
Bitfield x;
<span class="hljs-keyword">int</span> A, B, C;
x.abc = A | (B &lt;&lt; <span class="hljs-number">4</span>) | (C &lt;&lt; <span class="hljs-number">6</span>);
<span class="hljs-comment">// Or, if protection against overflow is needed:</span>
x.abc = (A &amp; <span class="hljs-number">0x0F</span>) | ((B &amp; <span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">4</span>) | ((C &amp; <span class="hljs-number">3</span>) &lt;&lt;<span class="hljs-number">6</span> );
</div></code></pre>
<h2 id="pointers-and-references">Pointers and references</h2>
<p>Pointers and references are the same thing (same machine code will be genreated).</p>
<p>using pointers requires an extra register to hold the value of the pointer or reference.</p>
<h3 id="pointer-arithmetic">Pointer arithmetic</h3>
<p>when an integer is added to a pointer then its value is multiplied by the size of the object pointed to. The time is equal to a multiplication and an addition.</p>
<ul>
<li>Incrementing or decrementing a pointer does not require a multiplication, only an addition.</li>
</ul>
<p>The object pointed to can be accessed approximately two clock cycles after the value of the pointer has been calculated.</p>
<ul>
<li>x = *(p++) is more efficient than x = *(++p) because:
<ul>
<li>the latter case the reading of x must wait until a few clock cycles after the pointer p has been incremented,</li>
<li>the former case x can be read before p is incremented.</li>
</ul>
</li>
</ul>
<br>
<h2 id="type-conversions">Type conversions</h2>
<p>Below different methods have same effect in performance, choice is a matter of programming style.</p>
<pre><code class="language-c++"><div><span class="hljs-comment">// Example 7.19</span>
<span class="hljs-keyword">int</span> i; <span class="hljs-keyword">float</span> f;
f = i; 		        <span class="hljs-comment">// Implicit type conversion</span>
f = (<span class="hljs-keyword">float</span>)i;	    <span class="hljs-comment">// C-style type casting</span>
f = <span class="hljs-built_in"><span class="hljs-keyword">float</span></span>(i); 	    <span class="hljs-comment">// Constructor-style type casting</span>
f = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">float</span>&gt;(i); <span class="hljs-comment">// C++ casting operator</span>
</div></code></pre>
<h3 id="signed--unsigned-conversion">Signed / unsigned conversion</h3>
<p>Conversion between signed and unsigned integers is costless. It is simply a matter of interpreting the same bits differently. There is no checking for overflow, and the code takes no extra time.</p>
<h3 id="integer-size-conversion">Integer size conversion</h3>
<p>An integer is converted to a longer size by extending the sign-bit if the integer is signed, or by extending with zero-bits if unsigned. This typically takes one clock cycle.
Converting an integer to a smaller size is done simply by ignoring the higher bits. There is no check for overflow. It takes no extra time.</p>
<h3 id="floating-point-precision-conversion">Floating-point precision conversion</h3>
<p>Conversions between float, double and long double take between 2 and 15 clock cycles (depending on the processor) when the XMM registers are used.
It takes no extra time in x87 register stack.</p>
<h3 id="integer-to-float-conversion">Integer to float conversion</h3>
<ul>
<li>Conversion of signed integers to floating point (float or double) is fast when the SSE2 instruction set is enabled, it takes 4 - 16 clock cycles.</li>
<li>Conversion of unsigned integers takes longer time than signed integers unless the AVX512 instruction set is enabled
<ul>
<li>It is faster to first convert the unsigned integer to a signed integer if no risk of overflow</li>
</ul>
</li>
</ul>
<p>Example: avoid int to float conversion by replacing an integer variable by a float variable.</p>
<pre><code class="language-C++"><div><span class="hljs-comment">// unoptimzied</span>
<span class="hljs-keyword">float</span> a[<span class="hljs-number">100</span>]; <span class="hljs-keyword">int</span> i;
<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) a[i] = <span class="hljs-number">2</span> * i;
<span class="hljs-comment">// optimized </span>
<span class="hljs-keyword">float</span> a[<span class="hljs-number">100</span>]; <span class="hljs-keyword">int</span> i; <span class="hljs-keyword">float</span> i2;
<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, i2 = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++, i2 += <span class="hljs-number">2.0f</span>) a[i] = i2;
</div></code></pre>
<h3 id="float-to-integer-conversion">Float to integer conversion</h3>
<p>C++ standard specifies that conversion from floating-point to integers use transaction towards zero, rather than rounding.</p>
<ul>
<li>Conversion of a floating-point number to an integer takes a very long time unless the SSE2 or later instruction set is enabled. Typically, the conversion takes 50 - 100 clock cycles.
<ul>
<li>The reason is that the C/C++ standard specifies truncation so the floating-point rounding mode has to be changed to truncation and back again.</li>
</ul>
</li>
<li>In 64-bit mode (where SSE2 is enabled by default) there is no difference in speed between rounding and truncation.</li>
</ul>
<p>It is <strong>important to avoid</strong> floating-point-to-integer conversions in the critical part of a code</p>
<ul>
<li>At least use 64-bit mode or enable the SSE2 instruction set</li>
<li>Move the conversion out-of innermost loop</li>
<li>Use rounding instead of truncation, make a round function using assembly.</li>
</ul>
<h2 id="reinterpret_cast">reinterpret_cast</h2>
<p>The reinterpret_cast operator is used for pointer conversions. It does not produce any extra code.</p>
<h3 id="faster-way-of-fabs">Faster way of fabs()</h3>
<p>In the conversion below, the compiler does not produce any extra code for actually making a pointer. The pointer is simply optimized away. But the &amp; operator forces the compiler to store x in memory rather than in a register.</p>
<pre><code class="language-C++"><div><span class="hljs-keyword">float</span> x;
*(<span class="hljs-keyword">int</span>*)&amp;x |= <span class="hljs-number">0x80000000</span>; <span class="hljs-comment">// Set sign bit of x</span>
</div></code></pre>
<p>Dangers doing so:</p>
<ul>
<li>Violates the strict aliasing rule of standard C: two pointers of different types cannot point to the same object (except for char pointers).
<ul>
<li>optimizing compiler might store the floating point and integer representations in two different registers.</li>
</ul>
</li>
<li>The trick will fail if the object is treated as bigger than it actually is. This above code will fail if an int uses more bits than a float.</li>
</ul>
<p>Another way doing fabs(f) is using union.
A union can also be used for accessing the same data in different ways. Example:</p>
<pre><code class="language-C++"><div><span class="hljs-class"><span class="hljs-keyword">union</span> {</span>
<span class="hljs-keyword">float</span> f;
<span class="hljs-keyword">int</span> i;
} x;
x.f = <span class="hljs-number">2.0f</span>;
x.i |= <span class="hljs-number">0x80000000</span>; <span class="hljs-comment">// set sign bit of f</span>
cout &lt;&lt; x.f; <span class="hljs-comment">// will give -2.0</span>
</div></code></pre>
<p>In this example, the sign bit of f is set by using the bitwise OR operator, which can only be applied to integers.</p>
<h2 id="const_cast--static_cast">const_cast / static_cast</h2>
<p>It doesn’t generate extra code and it doesn’t take extra time.</p>
<h2 id="dynamic_cast">dynamic_cast</h2>
<p>In general, the expression dynamic_cast&lt;Type*&gt;(ptr), converts the pointer ptr to a pointer of type Type*.</p>
<ul>
<li>If it's pointer type, and the pointer-to object (*ptr) is of type Type or derived directly or indirectly from type Type. Otherwise, the expression evaluates to <strong>0, the null pointer</strong>.</li>
<li>If it's a reference type when it fails, then <strong>std::bad_cast exception</strong> is thrown</li>
</ul>
<h2 id="rtti">RTTI</h2>
<p>The C++ programming language definition implies that information about types be available at run time for three distinct purposes:</p>
<ol>
<li>to support the typeid operator,</li>
<li>to match an exception handler with a thrown object, and</li>
<li>to implement the dynamic_cast operator.</li>
</ol>
<p>(3) only requires type information about dynamic class types, but (1) and (2) may apply to other types as well; for example, when a pointer to an int is thrown, it can be caught by a handler that catches &quot;int const*&quot;.</p>

        
        
    </body>
    </html>