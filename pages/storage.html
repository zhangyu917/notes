<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Value Categories</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{text-rendering:auto;font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.13.24"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
#button { display: inline-block; background-color: #FF9800; width: 50px; height: 50px; text-align: center; border-radius: 4px; position: fixed; bottom: 30px; right: 30px; transition: background-color .3s, opacity .5s, visibility .5s; opacity: 0; /*visibility: hidden;*/ z-index: 1000; } #button::after { content: "\f077"; font-family: FontAwesome; font-weight: normal; font-style: normal; font-size: 2em; line-height: 50px; color: #fff; } #button:hover { cursor: pointer; background-color: #333; } #button:active { background-color: #555; } #button.show { opacity: 1; visibility: visible; } #btn-back-to-top { position: fixed; bottom: 20px; right: 20px; display: none; } .to-top { background: white; position: fixed; bottom: 16px; right:32px; width:50px; height:50px; border-radius: 50%; border-color: white; display: flex; align-items: center; justify-content: center; font-size:32px; color:#1f1f1f; text-decoration: none; opacity: 0.5; pointer-events: auto; transition: all .4s; transform: rotate(270deg); } 
</style>
    </head>
    <body class="vscode-body vscode-light">
        <ul>
<li><a href="#value-categories">Value Categories</a>
<ul>
<li><a href="#c17-clarified-the-semantic-meaning-of-value-categories">C++17 clarified the semantic meaning of value categories.</a></li>
</ul>
</li>
<li><a href="#stack-storage">Stack storage</a>
<ul>
<li><a href="#stack-vs-heap-in-memory-space">stack vs. heap in memory space</a></li>
</ul>
</li>
<li><a href="#dynamic-memory-allocation">Dynamic memory allocation</a>
<ul>
<li><a href="#disvantages-of-heap--dynamic-allocation">Disvantages of heap / dynamic allocation</a></li>
<li><a href="#malloc">malloc()</a>
<ul>
<li><a href="#aligned-mallac">Aligned mallac</a></li>
<li><a href="#new-vs-malloc">new vs. malloc</a></li>
</ul>
</li>
<li><a href="#free">free()</a></li>
<li><a href="#calloc">calloc()</a></li>
<li><a href="#realloc">realloc()</a></li>
<li><a href="#alloca">alloca()</a></li>
<li><a href="#int-brkvoid-end_data_segment">int brk(void *end_data_segment)</a></li>
<li><a href="#void-sbrkintptr_t-increment">void *sbrk(intptr_t increment);</a></li>
</ul>
</li>
<li><a href="#global-and-static-storage">Global and static storage</a>
<ul>
<li><a href="#static-keywords"><code>static</code> keywords</a></li>
</ul>
</li>
<li><a href="#register-storage">Register storage</a></li>
<li><a href="#volatile"><code>volatile</code></a></li>
<li><a href="#thread-local-storage">Thread local storage</a></li>
</ul>
<p><a href="#" class="to-top">➤</i></a></p>
<h1 id="value-categories">Value Categories</h1>
<p><a href="https://en.cppreference.com/w/cpp/language/value_category">https://en.cppreference.com/w/cpp/language/value_category</a></p>
<p>Expressions in C++ are assigned a particular value category, which determines two important-but-separate properties about an expression:</p>
<ul>
<li>whether the expression has identity, ie. if it refers to <strong>an object that has a variable name</strong>.</li>
<li>whether it is legal to implicitly move from the expression's value, ie. when used as a function parameter, will bind to r-value parameter types or not.</li>
</ul>
<blockquote>
<p>Remember value categories are a taxonomy of expressions. They are not categories of objects or variables or types.</p>
</blockquote>
<p><img src="images/2022-03-25-20-18-42.png" alt=""></p>
<p><strong>rvalue</strong>: expressions that can be moved from, regardless of whether it has identity.</p>
<p><em>Only</em> rvalue expressions may be used as the argument to a function that takes a parameter of type <code>T &amp;&amp;</code>.</p>
<p><code>std::move</code> explicitly casts a non-rvalue expression into an rvalue. More specifically, it turns the expression into an xvalue. ( even if it was an identity-less prvalue expression before, by passing it as a parameter to <code>std::move</code>, it gains identity (the function's parameter name) and becomes an xvalue.)</p>
<p><strong>xvalue (eXpiring value)</strong>: expressions that are moveable from, with identity</p>
<p>xvalue is a glvalue that denotes an object whose resources can be reused, ie, the object they represent is going to be destroyed soon, therefore implicitly moving from them is fine.</p>
<p>Examples of xvalues are:</p>
<ul>
<li>The result of a function returned by rvalue reference <code>(type&amp;&amp;</code>, especially returned by <code>std::move()</code>)</li>
<li>A cast to an rvalue reference of an object type</li>
</ul>
<pre><code class="language-C++"><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">X</span> {</span> <span class="hljs-keyword">int</span> n; };
<span class="hljs-keyword">extern</span> X x;

std::<span class="hljs-built_in">move</span>(x);        <span class="hljs-comment">// xvalue</span>
std::forward&lt;X&amp;&gt;(x); <span class="hljs-comment">// lvalue</span>
X{<span class="hljs-number">4</span>};                <span class="hljs-comment">// prvalue: does not have an identity</span>
X{<span class="hljs-number">4</span>}.n;              <span class="hljs-comment">// xvalue: HAS a name, so is a glvalue. can be moved from, so it&#x27;s an xvalue</span>
</div></code></pre>
<p><strong>prvalue (pure rvalue)</strong>: expressions that are moveable from, without identity</p>
<p>Examples of prvalue:</p>
<ul>
<li>literal (<strong>except a string literal</strong> - those are lvalues), such has <code>1</code>, <code>true</code>, <code>0.5f</code>, or <code>nullptr</code></li>
<li>Expressions that represent temporary objects, such as <code>std::string(&quot;123&quot;)</code>.</li>
<li>function call expression that does not return a reference (ie, return by value)</li>
<li><code>a + b</code>, <code>a % b</code>, <code>a &amp; b</code>, <code>a &lt;&lt; b</code>, and all other built-in arithmetic expressions;</li>
<li>lambda expression</li>
</ul>
<p>The built-in addressof operator (&amp;) cannot be applied on these expressions.</p>
<p><strong>lvalue</strong>: expressions with identity but cannot be implicitly moved from.</p>
<p>Examples of lvalues are:</p>
<ul>
<li>An expression that is just the name of a variable, function, or member</li>
<li>An expression that is just a string literal</li>
<li>The result of the built-in unary * operator (i.e., what dereferencing a raw pointer yields)</li>
<li>The result of a function returned by lvalue reference (<code>type&amp;</code>)</li>
</ul>
<pre><code class="language-C++"><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">X</span> {</span> ... };

X x;         <span class="hljs-comment">// x is an lvalue</span>
X* px = &amp;x;  <span class="hljs-comment">// px is an lvalue</span>
*px = X{};   <span class="hljs-comment">// *px is also an lvalue, X{} is a prvalue</span>

<span class="hljs-function">X* <span class="hljs-title">foo_ptr</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">// foo_ptr() is a prvalue (?)</span>
<span class="hljs-function">X&amp; <span class="hljs-title">foo_ref</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">// foo_ref() is an lvalue</span>
</div></code></pre>
<p><strong>glvalue (generalized lvalue)</strong>: expressions with identity</p>
<h2 id="c17-clarified-the-semantic-meaning-of-value-categories">C++17 clarified the semantic meaning of value categories.</h2>
<p><img src="images/2022-03-25-20-52-39.png" alt=""></p>
<p>The key approach for explaining value categories now is that in general, we have two kinds of expressions:</p>
<ul>
<li><strong>glvalue</strong>: is an expression whose evaluation computes the <em>location</em> of an object, bit-field, or function. (An xvalue is then considered a special location, representing an object whose resources can be reused, usually because the object is near the end of its lifetime)</li>
<li><strong>prvalue</strong>:  is an expression whose evaluation <em>initializes</em> an object, bit-field, or operand of an operator, as specified by the context in which it appears.
<ul>
<li>ie, prvalues themselves do not necessarily have to lead to the existence of objects (only if a &quot;materialization&quot; is necessary).</li>
</ul>
</li>
</ul>
<p>In summary: <strong>prvalues perform initialization, glvalues produce locations.</strong></p>
<pre><code class="language-C++"><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">X</span> {</span> <span class="hljs-keyword">int</span> n; };
<span class="hljs-keyword">extern</span> X x;
X{<span class="hljs-number">4</span>};   <span class="hljs-comment">// prvalue: represents initialization of an X object</span>
x.n;    <span class="hljs-comment">// glvalue: represents the location of x&#x27;s member n</span>
X{<span class="hljs-number">4</span>}.n; <span class="hljs-comment">// glvalue: represents the location of X{4}&#x27;s member n;</span>
        <span class="hljs-comment">//          in particular, xvalue, as member is expiring</span>

<span class="hljs-keyword">using</span> T = X[<span class="hljs-number">2</span>];
T{{<span class="hljs-number">5</span>}, {<span class="hljs-number">6</span>}};    <span class="hljs-comment">// prvalue: represents initialization of an array of 2 X&#x27;s</span>
T{{<span class="hljs-number">5</span>}, {<span class="hljs-number">6</span>}}[<span class="hljs-number">0</span>]; <span class="hljs-comment">// xvalue: represents location of expiring array element</span>
</div></code></pre>
<p>C++17 then introduces a new term: <em><strong>materialization</strong></em>.  It is the moment when a prvalue becomes a temporary object (ie. when they denote an object). A <em>temporary materialization conversion</em> is a prvalue-to-xvalue conversion.</p>
<pre><code class="language-C++"><div><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-keyword">const</span> X&amp; p)</span></span>; <span class="hljs-comment">// accepts an expression of any value category, but expects a glvalue</span>
<span class="hljs-built_in">f</span>(<span class="hljs-built_in">X</span>());             <span class="hljs-comment">// expression &quot;X()&quot; passed in as a prvalue, and it is materialized into an xvalue.</span>
</div></code></pre>
<ul>
<li>Only rvalue expressions can bind to rvalue references</li>
<li>only lvalue expressions can bind to non-const lvalue references</li>
<li>the one exception is that rvalues can bind to const lvalue references.</li>
</ul>
<p>Any time a prvalue validly appears where a glvalue (lvalue or xvalue) is expected, a temporary object is created and initialized with the prvalue (remember prvalues are expressions to initialize objects), and the prvalue is replaced by an xvalue designating the temporary. Note that materialization does not mean that we create a new/different object. The lvalue reference <code>p</code> still binds to both an xvalue and a prvalue, although the latter now always involves a conversion to an xvalue.</p>
<h1 id="stack-storage">Stack storage</h1>
<p>It is used for storing:</p>
<ul>
<li>function return addresses (i.e. where the function was called from)</li>
<li>Function parameters,</li>
<li>local variables,</li>
<li>for saving registers that have to be restored before the function returns.
Every time a function is called, it allocates the required amount of space on the stack for all these purposes.</li>
</ul>
<p>The stack is the most efficient memory space to store data, It is almost certain that this part of the memory is mirrored in the level-1 data cache if there are no big arrays.</p>
<p>Most compilers do not free the memory used by a variable until the function returns even though it could free the memory when exiting the {} brackets in which the variable is declared.</p>
<ul>
<li>If the variable is stored in a register then it may be freed before the function returns.</li>
</ul>
<br>
<h2 id="stack-vs-heap-in-memory-space">stack vs. heap in memory space</h2>
<p>Same:</p>
<ul>
<li>Stored in computer RAM.</li>
</ul>
<p>Stack:</p>
<ul>
<li>Variables created on the stack will go out of scope and are automatically deallocated.</li>
<li>faster to allocate in comparison to variables on the heap.</li>
<li>Stores local data, return addresses, used for parameter passing.</li>
<li>Can have a stack overflow when too much of the stack is used (mostly from infinite or too deep recursion, very large allocations).</li>
<li>You would use the stack if you know exactly how much data you need to allocate before compile time and it is not too big.</li>
<li>Each thread gets a stack, while there's typically only one heap for the application</li>
</ul>
<p>Heap:</p>
<ul>
<li>In C++, data created on the heap will be pointed to by pointers and allocated with new or malloc, must be destroyed manually with delete, delete[], or free.</li>
<li>Used on demand to allocate a block of data for use by the program.
<ul>
<li>You would use the heap if you don't know exactly how much data you will need at run time or if you need to allocate a lot of data.</li>
</ul>
</li>
</ul>
<h1 id="dynamic-memory-allocation">Dynamic memory allocation</h1>
<h2 id="disvantages-of-heap--dynamic-allocation">Disvantages of heap / dynamic allocation</h2>
<ul>
<li>Can have fragmentation when there are a lot of allocations and deallocations.</li>
<li>Objects that are allocated in sequence are not necessarily stored sequentially in memory.</li>
<li>Can have allocation failures if too big of a buffer is requested to be allocated.</li>
<li>Dynamic memory allocation also tends to make the code more complicated and error-prone.
<ul>
<li>Memory leak</li>
<li>Access an object after it is deallocated</li>
</ul>
</li>
</ul>
<h2 id="malloc">malloc()</h2>
<ul>
<li><code>malloc()</code> returns void *, we can assign it to any type of C pointer.</li>
<li>The allocated memory is not initialized.</li>
<li>The block of memory returned by <code>malloc()</code> is always aligned on a byte boundary suitable for any type of C data structure. In practice, this means that it is allocated on an 8-byte or 16-byte boundary on most architectures.</li>
<li>Linux behavior: the call <code>malloc(0)</code> may return a small piece of memory that can (and should) be freed with <code>free()</code>.</li>
</ul>
<p><strong>Implementation of malloc()</strong></p>
<ul>
<li>first scans the list of memory blocks previously released by <code>free()</code> in order to find one whose size is larger than or equal to its requirements.
<ul>
<li>If the block is exactly the right size, then it is returned to the caller.</li>
<li>If it is larger, then it is split, so that a block of the correct size is returned to the caller and a smaller free block is left on the free list.</li>
</ul>
</li>
<li>If no block on the free list is large enough, then <code>malloc()</code> calls <code>sbrk()</code> to allocate more memory.
<ul>
<li>To reduce the number of calls to <code>sbrk()</code>, <code>malloc()</code> increases the program break in larger units (some multiple of the virtual memory page size)</li>
</ul>
</li>
<li>When <code>malloc()</code> allocates the block, it allocates extra bytes to hold an integer containing the size of the block. This integer is located at the beginning of the block;</li>
</ul>
<p><img src="images/2022-02-14-15-10-59.png" alt=""></p>
<p><a href="memory_management.html#malloc-kernel-implementation"><strong>malloc kernel implementation</strong></a></p>
<h3 id="aligned-mallac">Aligned mallac</h3>
<pre><code class="language-C++"><div><span class="hljs-function"><span class="hljs-keyword">void</span>* <span class="hljs-title">aligned_malloc</span><span class="hljs-params">(<span class="hljs-keyword">size_t</span> required_bytes, <span class="hljs-keyword">size_t</span> alignment)</span>
</span>{
    <span class="hljs-keyword">int</span> offset = alignment - <span class="hljs-number">1</span> + <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword">void</span>*);
    <span class="hljs-keyword">void</span>* p1 = <span class="hljs-built_in">malloc</span>(required_bytes + offset);    <span class="hljs-comment">// malloc returns void*</span>
    <span class="hljs-keyword">if</span> ((p1 == <span class="hljs-literal">nullptr</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;

    <span class="hljs-keyword">void</span>** p2 = (<span class="hljs-keyword">void</span>**)(((<span class="hljs-keyword">size_t</span>)(p1) + offset) &amp; ~(alignment - <span class="hljs-number">1</span>)); <span class="hljs-comment">// void** so that we can do index</span>
    p2[<span class="hljs-number">-1</span>] = p1;
    <span class="hljs-keyword">return</span> p2;
}

<span class="hljs-keyword">void</span> <span class="hljs-built_in">aligned_free</span>(<span class="hljs-keyword">void</span> *p)
{
    <span class="hljs-keyword">void</span>* p1 = ((<span class="hljs-keyword">void</span>**)p)[<span class="hljs-number">-1</span>]; <span class="hljs-comment">// get the pointer to the buffer we allocated</span>
    <span class="hljs-built_in">free</span>(p1); <span class="hljs-comment">// free takes void*</span>
}
</div></code></pre>
<h3 id="new-vs-malloc">new vs. malloc</h3>
<p><img src="images/2022-01-25-22-36-20.png" alt=""></p>
<p>Technically, memory allocated by new comes from the 'Free Store' while memory allocated by malloc comes from the 'Heap'. Whether these two areas are the same is an implementation detail, which is another reason that malloc and new cannot be mixed.</p>
<h2 id="free">free()</h2>
<p>In general, free() doesn’t lower the program break. Reasons below:</p>
<ul>
<li>The block of memory being freed is typically somewhere in the middle of the heap, rather than at the end, so that lowering the program break is not possible.</li>
<li>The deallocated blocks of memory are maintained on a free list and recycled in future calls to allocate memory. This minimizes the number of <code>sbrk()</code> calls that the program must perform.</li>
<li>The glibc <code>free()</code> function calls <code>sbrk()</code> to lower the program break <strong>only when</strong> the free block is at the top end and it is “sufficiently” large, where “sufficient” is determined by parameters controlling the operation of the malloc package (128 kB is a typical value).</li>
</ul>
<p><code>free()</code> a NULL pointer, the call does nothing. (In other words, it is not an error to give a NULL pointer to <code>free()</code>.</p>
<p>It is an error to free the same piece of allocated memory more than once. With glibc on Linux, we often get a segmentation violation (SIGSEGV signal).</p>
<p><strong>Implementation of free()</strong><br>
When a block is placed on the (doubly linked) free list, <code>free()</code> uses the bytes of the block itself in order to add the block to the list, the block becomes below</p>
<p><img src="images/2022-02-14-15-16-02.png" alt=""></p>
<h2 id="calloc">calloc()</h2>
<p><code>calloc()</code> allocates the memory and also initializes the allocates memory block to zero. If we try to access the content of these blocks then we’ll get 0.</p>
<p><strong>calloc vs. malloc</strong><br></p>
<ul>
<li>
<p><code>calloc()</code> initializes to 0 <br>
<code>malloc()</code> doesn’t initialize the allocated memory. If we try to access the content of the memory block then we’ll get garbage values.</p>
</li>
<li>
<p>Parameter difference <br>
<code>calloc()</code> takes two arguments: <br></p>
<ul>
<li>Number of blocks to be allocated.</li>
<li>Size of each block.</li>
</ul>
<pre><code class="language-C++"><div><span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">malloc</span><span class="hljs-params">( <span class="hljs-keyword">size_t</span> size )</span></span>; 
<span class="hljs-function"><span class="hljs-keyword">void</span> * <span class="hljs-title">calloc</span><span class="hljs-params">( <span class="hljs-keyword">size_t</span> num, <span class="hljs-keyword">size_t</span> size )</span></span>; 
</div></code></pre>
</li>
<li>
<p>Same Return Value:</p>
<ul>
<li>After successful allocation in <code>malloc()</code> and <code>calloc()</code>, a pointer to the block of memory is returned</li>
<li>NULL value is returned which indicates the failure of allocation.</li>
</ul>
</li>
</ul>
<h2 id="realloc">realloc()</h2>
<p>use to resize a block of memory previously allocated by one of the functions in the malloc package.</p>
<pre><code class="language-C++"><div><span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">realloc</span><span class="hljs-params">( <span class="hljs-keyword">void</span> *ptr, <span class="hljs-keyword">size_t</span> new_size )</span></span>;
</div></code></pre>
<ul>
<li>A big 'gotcha' with realloc is the pointer to your existing data may change.</li>
<li><code>realloc()</code> attempts to coalesce the block with an immediately following block of memory on the free list, if one exists and is large enough. You will reduce memory fragmentation with it if you have a lot of dynamic allocations.
<ul>
<li>If the block lies at the end of the heap, then <code>realloc()</code> expands the heap.</li>
<li>If the block of memory lies in the middle of the heap, and there is insufficient free space immediately following it, <code>realloc()</code> allocates a new block of memory and copies all existing data from the old block to the new block.</li>
<li>The last case above is common and CPU-intensive. So better to minimize use of realloc.</li>
</ul>
</li>
<li>When <code>NULL</code> is passed, realloc is equivalent to malloc.
<ul>
<li>The <code>NULL</code> call can be useful if you're allocating in some kind of loop and don't want to have a special case the first time you allocate.</li>
</ul>
</li>
<li>On success, The original pointer ptr is invalidated and any access to it is undefined behavior (even if reallocation was in-place).</li>
<li>On failure, returns a null pointer. The original pointer ptr remains valid and may need to be deallocated with <code>free()</code> or <code>realloc()</code>.</li>
</ul>
<h2 id="alloca">alloca()</h2>
<p>The <code>alloca()</code> function allocates size bytes of space in the stack frame of the caller.  This temporary space is automatically freed when the function that called <code>alloca()</code> returns to its caller.</p>
<ul>
<li>Dont use to allocate large memory - no proper error code.</li>
<li>Dont use it in a function that can get inlined - all allocation could happen in the caller.</li>
<li><strong>Must not</strong> call <code>free()</code> to deallocate memory allocated with <code>alloca()</code>, neither is <code>realloc()</code> possible.</li>
</ul>
<p><strong>Advantage of using alloca</strong><br></p>
<ul>
<li>Faster than <code>malloc()</code>, because <code>alloca()</code> is implemented by the compiler as inline code that directly adjusts the stack pointer. Furthermore, <code>alloca()</code> doesn’t need to maintain a list of free blocks.</li>
<li>The memory that it allocates is automatically freed when the stack frame is removed.
<ul>
<li>Code may become cleaner</li>
<li>Maybe useful in <code>longjmp()</code> case.</li>
</ul>
</li>
</ul>
<h2 id="int-brkvoid-end_data_segment">int brk(void *end_data_segment)</h2>
<p>The brk() system call sets the program break to the location specified by end_data_segment. Since virtual memory is allocated in units of pages, end_data_segment is effectively rounded up to the next page boundary.</p>
<ul>
<li>Attempts to set the program break below its initial value is unexpected behavior.</li>
<li>The upper limit depends on a couple factors.</li>
</ul>
<h2 id="void-sbrkintptr_t-increment">void *sbrk(intptr_t increment);</h2>
<ul>
<li>In linux, sbrk() is a library function implemented on top of brk().</li>
<li>On success, sbrk() returns the previous address of the program break.
<ul>
<li>sbrk(0) returns the current setting of the program break without changing it.</li>
</ul>
</li>
</ul>
<br>
<h1 id="global-and-static-storage">Global and static storage</h1>
<p>static memory is used in below places:</p>
<ul>
<li>Global variables</li>
<li>variables declared with the static keyword,</li>
<li>Floating-point constants, string constants, array initializer lists,</li>
<li>switch statement jump tables,</li>
<li>virtual function tables.</li>
</ul>
<p>The static data area is usually divided into three parts:</p>
<ul>
<li>one for constants that are never modified by the program,</li>
<li>one for initialized variables that may be modified by the program,</li>
<li>one for uninitialized variables that may be modified by the program.</li>
</ul>
<p>Advantages of static data:</p>
<ul>
<li>it can be initialized to desired values before the program starts.</li>
</ul>
<p>disadvantages of static data:</p>
<ul>
<li>memory space is occupied throughout the whole program execution, even if the variable is only used in a small part of the program.
<ul>
<li>Makes data cache less efficient because of no reuse of memory space</li>
</ul>
</li>
</ul>
<p>How to avoid global variables:</p>
<ul>
<li>Transfer variable as a function parameter</li>
<li>Make it a class member for related functions</li>
<li>unavoidable: communication between different threads</li>
</ul>
<p>It is preferable to declare a variable static <strong>and</strong> const</p>
<pre><code class="language-C++"><div><span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">SomeFunction</span> <span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">float</span> list[] = {<span class="hljs-number">1.1</span>, <span class="hljs-number">0.3</span>, <span class="hljs-number">-2.0</span>, <span class="hljs-number">4.4</span>, <span class="hljs-number">2.5</span>};
    <span class="hljs-keyword">return</span> list[x];
}
</div></code></pre>
<p>A static declaration on an initialized variable inside a function means that the variable has to be initialized the first time the function is called, but not on subsequent calls.</p>
<ul>
<li>This is inefficient because the function needs extra overhead to check whether it called for the first time or it has been called before.</li>
<li>The const declaration helps the compiler to see that the table never changes and decide that the check for the first call is not needed.</li>
</ul>
<p>Most compilers will recognize that the two constants are identical so that only one constant needs to be stored. All identical constants in the entire program will be joined together in order to minimize the amount of cache space used for constants.</p>
<p>String constants and floating-point constants are often stored in static memory.</p>
<p><strong>Integer constants are usually included as part of the instruction code.</strong> You can assume that there are no caching problems for integer constants.</p>
<br>
<h2 id="static-keywords"><code>static</code> keywords</h2>
<p><code>static</code> has two different usage.</p>
<ol>
<li>Used for static member or function in a class or inside a function</li>
</ol>
<ul>
<li>It defines <em>storage duration</em>. The storage for the object is allocated when the program begins (or enters the function for static in function) and deallocated when the program ends. Only one instance of the object exists. It retains its memory and contents throughout the program execution.</li>
<li>Static data members are not associated with any object. They exist even if no objects of the class have been defined. There is only one instance of the static data member in the entire program with static storage duration</li>
<li>Static member functions are not associated with any object. When called, they have no this pointer.
<ul>
<li>Static member functions cannot be virtual, const, or volatile.</li>
</ul>
</li>
</ul>
<br>
<ol start="2">
<li>Used for global variable</li>
</ol>
<ul>
<li>It defines Internal linkage -  linkage determines whether a variable can be accessed (or linked) in another file.
<ul>
<li>The name can be referred to from all scopes in the current translation unit.</li>
</ul>
</li>
</ul>
<p><em><strong>static initialization</strong></em> <a href="https://eel.is/c++draft/basic.start#static">6.9.3.2</a></p>
<ul>
<li><em>Constant initialization</em> is performed if a variable or temporary object with static or thread storage duration is constant-initialized. Eg. it is initialized with a constexpr.</li>
<li>If <em>constant initialization</em> is not performed, a variable with static storage duration or thread storage duration is <em>zero-initialized</em>.</li>
<li>Together, <em>zero-initialization</em> and <em>constant initialization</em> are called static initialization;</li>
</ul>
<br>
<h1 id="register-storage">Register storage</h1>
<p>A limited number of variables can be stored in registers instead of main memory.</p>
<p>All optimizing compilers will automatically choose the most often used variables in a function for register storage.</p>
<ul>
<li>Typical candidates for register variables are temporary intermediates, loop counters, function parameters, pointers, references, 'this' pointer, common subexpressions, and induction variables</li>
<li>A variable cannot be stored in a register if its address is taken, i.e. if there is a pointer or reference to it.</li>
</ul>
<p>The same register can be used for multiple variables as long as their uses (live ranges) do not overlap.</p>
<p>The number of registers is limited. In 64-bit system</p>
<ul>
<li>14 integer registers</li>
<li>16 floating-point registers</li>
<li>32 FP registers when the AVX512 instruction set is enabled.</li>
</ul>
<br>
<h1 id="volatile"><code>volatile</code></h1>
<p>The effect of the keyword <code>volatile</code> is that it makes sure the variable is stored in memory rather than in a register and prevents all optimizations on the variable.</p>
<p><code>volatile</code> only prevents compiler optimizations but CPU might still reorder operations and/or cache the reads/writes.</p>
<p>It has two affects:</p>
<ol>
<li>
<p>memory read and write.  <code>volatile</code> forces the compiler to generate code that performs actual memory reads and writes instead of caching values in registers.</p>
<ul>
<li>
<p>This means that all read/write to volatile is much slower than normal read/write operations. It can hurt performance.</p>
</li>
<li>
<p>The value of the variable may change without any code of yours changing it that compiler will not know. Therefore whenever the compiler reads the value of the variable, it may not assume that it is the same as the last time it was read, or that it is the same as the last value stored, but it must be read again.</p>
</li>
<li>
<p>The act of storing a value to a volatile variable is a &quot;side effect&quot; which can be observed from the outside, so the compiler is not allowed to remove the act of storing a value; for example if two values are stored in a row, then the compiler must actually store the value twice. <br>
As an example: <br>
<code>i = 2; i = i;</code> <br>
The compiler must store the number two, read the variable i, store the variable that it read into i.</p>
</li>
</ul>
</li>
<li>
<p>All operations on volatile data are executed in the sequence they appear in the source code.</p>
<ul>
<li>This allows implementation of I/O protocols that mix input and output.</li>
</ul>
</li>
</ol>
<p>There is another situation: If a function uses setjmp and then longjmp is called, all volatile local variables of the function are guaranteed to have the last value stored - this is not the case with non-volatile local variables.</p>
<p><strong>Note that volatile does not mean atomic</strong>. It will not prevent two threads from attempting to write the variable at the same time.</p>
<br>
<h1 id="thread-local-storage">Thread local storage</h1>
<p>thread-local storage provides persistent per-thread storage. The main advantage of thread-local storage is that it is much simpler to use than thread-specific data. This feature is nonstandard, but it is provided in most UNIX implementations.</p>
<p>Most compilers can make thread-local storage of static and global variables by using the keyword <code>thread_local</code>,<code> __thread</code> or <code>__declspec(thread)</code>.</p>
<p>To create a thread-local variable, we simply include the <code>__thread</code> specifier in the declaration of a global or static variable:</p>
<pre><code class="language-C++"><div><span class="hljs-keyword">static</span> __thread buf[MAX_ERROR_LEN];
</div></code></pre>
<ul>
<li>The <code>__thread</code> keyword must immediately follow the static or extern keyword, if either of these is specified in the variable’s declaration.</li>
<li>The C address (&amp;) operator can be used to obtain the address of a thread-local variable.</li>
</ul>
<p><strong>Thread-local storage is inefficient (slow)</strong> because it is accessed through a pointer stored in a thread environment block.</p>
<p>Static thread-local storage should be avoided when possible. Use storage on the thread's own stack. Non-static variables and objects that are declared in the thread function, or in any function called by the thread function, will be stored on the thread's stack.</p>
<br>

        
        
    </body>
    </html>